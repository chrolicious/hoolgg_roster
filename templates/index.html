<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hool.gg //Roster - Character & Crafting Progression Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.3.1/dist/driver.css">
</head>
<body>
    <header>
        <!-- Window Controls (Electron only) -->
        <div class="window-controls" id="windowControls" style="display: none;">
            <button class="window-control-btn minimize" id="minimizeBtn" title="Minimize">
                <svg viewBox="0 0 12 12">
                    <rect x="0" y="5" width="12" height="2"/>
                </svg>
            </button>
            <button class="window-control-btn maximize" id="maximizeBtn" title="Maximize">
                <svg viewBox="0 0 12 12">
                    <rect x="1" y="1" width="10" height="10" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
            </button>
            <button class="window-control-btn close" id="closeBtn" title="Close">
                <svg viewBox="0 0 12 12">
                    <line x1="1" y1="1" x2="11" y2="11" stroke="currentColor" stroke-width="1.5"/>
                    <line x1="11" y1="1" x2="1" y2="11" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </button>
        </div>
        <div class="header-content">
            <div class="header-left">
                <div class="logo">
                    <img src="{{ url_for('static', filename='hoolio-logo.png') }}?v=4" alt="Hool.gg //Roster Logo" class="logo-icon">
                    <div class="logo-text">
                        <h1>Hool.gg //Roster</h1>
                        <p class="tagline">Character & Crafting<br>Progression Tracker</p>
                    </div>
                </div>
            </div>
            <div class="header-center">
                <!-- Tab Navigation -->
                <nav class="tabs">
                    <button class="tab active" data-tab="dashboard">Dashboard</button>
                    <button class="tab" data-tab="gear-guide">Gear Guide</button>
                    <button class="tab" data-tab="settings">Settings</button>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- Dashboard View -->
        <div id="dashboard" class="view active">
            <div class="dashboard-grid" id="dashboardGrid"></div>
        </div>

        <!-- Gear Guide View -->
        <div id="gear-guide" class="view">
            <h2>Gear Track Reference</h2>
            <div id="gearGuideContent"></div>
        </div>

        <!-- Settings View -->
        <div id="settings" class="view">
            <h2>Settings</h2>
            <div class="settings-section">
                <h3>Blizzard API Configuration</h3>
                <div class="info-box">
                    <p class="info-box-title">Gear sync works out of the box</p>
                    <p class="info-box-text text-muted">
                        The app includes a shared API key that lets it <strong>pull your character data from the Blizzard Armory automatically</strong> â€” no setup needed.
                    </p>
                    <p class="info-box-text text-muted" style="margin: 0;">
                        If you run into rate-limit issues (rare, only with many characters syncing frequently), you can enter your own free credentials below from
                        <a href="https://develop.battle.net/" target="_blank" style="color: var(--hool-primary-blue); text-decoration: underline;">develop.battle.net</a>.
                        Your personal key stays on your device and is never sent anywhere else.
                    </p>
                </div>
                <div class="form-group">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                        <input type="checkbox" id="useSharedCredentials" checked style="width: 16px; height: 16px; cursor: pointer; accent-color: var(--hool-primary-blue);">
                        <label for="useSharedCredentials" style="font-size: var(--font-size-sm); color: var(--text-secondary); cursor: pointer; margin: 0;">
                            Use shared Blizzard API credentials
                        </label>
                    </div>
                </div>
                <div id="customCredentialsSection" style="display: none;">
                    <div class="form-group">
                        <label for="clientId">Client ID</label>
                        <input type="text" id="clientId" placeholder="Enter your Blizzard API Client ID">
                    </div>
                    <div class="form-group">
                        <label for="clientSecret">Client Secret</label>
                        <input type="password" id="clientSecret" placeholder="Enter your Blizzard API Client Secret">
                    </div>
                </div>
                <div class="form-group">
                    <label for="region">Region</label>
                    <select id="region">
                        <option value="us">US</option>
                        <option value="eu">EU</option>
                        <option value="kr">KR</option>
                        <option value="tw">TW</option>
                    </select>
                </div>
                <button class="btn-primary" id="saveApiConfig">Save API Configuration</button>
            </div>

            <div class="settings-section" id="updateSection" style="display: none;">
                <h3>App Updates</h3>
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 12px;">
                    <div>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-secondary);">
                            Current Version: <strong id="currentVersion">Loading...</strong>
                        </p>
                        <p style="margin: 4px 0 0 0; font-size: var(--font-size-sm);" id="updateStatus">
                            Checking for updates...
                        </p>
                    </div>
                </div>
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                    <input type="checkbox" id="autoDownloadToggle" checked style="width: 16px; height: 16px; cursor: pointer; accent-color: var(--hool-primary-blue);">
                    <label for="autoDownloadToggle" style="font-size: var(--font-size-sm); color: var(--text-secondary); cursor: pointer; margin: 0;">
                        Automatically download updates
                    </label>
                </div>
                <button class="btn-secondary" id="checkUpdatesBtn">Check for Updates</button>
                <button class="btn-primary" id="installUpdateBtn" style="margin-left: 12px; display: none;">Install Update</button>
            </div>

            <div class="settings-section">
                <h3>Utilities</h3>
                <button class="btn-secondary" id="resetDailyBtn">Reset Daily Checklists</button>
                <button class="btn-secondary" id="restartTourBtn" style="margin-left: 12px;" onclick="restartTourHandler()">Restart Guided Tour</button>
            </div>
        </div>
    </main>

    <script>const whTooltips = {colorLinks: true, iconizeLinks: true, renameLinks: true};</script>
    <script src="https://wow.zamimg.com/js/tooltips.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/driver.js@1.3.1/dist/driver.js.iife.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>

    <!-- Custom Modal for Character Input -->
    <div id="characterModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <h3>Add New Character</h3>
            <div class="form-group">
                <label for="modalCharacterName">Character Name</label>
                <input type="text" id="modalCharacterName" placeholder="Enter character name">
            </div>
            <div class="form-group">
                <label for="modalRealm">Realm</label>
                <input type="text" id="modalRealm" placeholder="Enter realm name">
            </div>
            <div style="display: flex; gap: 12px; margin-top: 20px;">
                <button class="btn-primary" id="modalAddBtn">Add Character</button>
                <button class="btn-secondary" id="modalCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
